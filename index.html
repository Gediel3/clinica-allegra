<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Painel Aviator</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #0d1117;
      color: #fff;
      margin: 0;
      padding: 0;
      text-align: center;
    }
    header {
      padding: 20px;
      background: #161b22;
      font-size: 24px;
      font-weight: bold;
    }
    .stats {
      display: flex;
      justify-content: space-around;
      flex-wrap: wrap;
      margin: 20px 0;
    }
    .card {
      background: #21262d;
      padding: 20px;
      border-radius: 12px;
      width: 220px;
      margin: 10px;
      box-shadow: 0 4px 8px rgba(0,0,0,0.4);
    }
    .profit { color: #4caf50; }
    .loss { color: #f44336; }

    .aviator-img {
      margin: 20px auto;
      width: 120px;
    }

    button {
      padding: 10px 20px;
      margin: 10px;
      border: none;
      border-radius: 8px;
      background: #238636;
      color: #fff;
      cursor: pointer;
      font-size: 16px;
    }
    button:hover { background: #2ea043; }

    table {
      width: 90%;
      margin: 20px auto;
      border-collapse: collapse;
      background: #161b22;
      border-radius: 8px;
      overflow: hidden;
    }
    table th, table td {
      border: 1px solid #30363d;
      padding: 10px;
    }

    /* Modal */
    .modal {
      position: fixed;
      top: 0; left: 0;
      width: 100%; height: 100%;
      background: rgba(0,0,0,0.8);
      display: flex;
      justify-content: center;
      align-items: center;
      z-index: 1000;
    }
    .modal-content {
      background: #161b22;
      padding: 30px;
      border-radius: 12px;
      width: 400px;
      text-align: center;
    }
    .progress-container {
      background: #30363d;
      border-radius: 20px;
      overflow: hidden;
      margin-top: 15px;
    }
    .progress-bar {
      background: #238636;
      height: 20px;
      width: 0%;
      transition: width 1s linear;
    }
    .time-remaining {
      margin-top: 10px;
      font-size: 14px;
    }
  </style>
</head>
<body>
  <header>Painel Aviator</header>

  <div class="aviator-img">
    ✈️
  </div>

  <div class="stats">
    <div class="card">
      <h3>Total Apostado</h3>
      <p id="totalApostado">R$ 0,00</p>
    </div>
    <div class="card">
      <h3>Total Pago</h3>
      <p id="totalPago">R$ 0,00</p>
    </div>
    <div class="card">
      <h3>Lucro/Prejuízo</h3>
      <p id="lucroCasa">R$ 0,00</p>
    </div>
  </div>

  <h2>Rodadas</h2>
  <table>
    <thead>
      <tr>
        <th>Rodada</th>
        <th>Total Apostado</th>
        <th>Total Pago</th>
        <th>Lucro da Casa</th>
      </tr>
    </thead>
    <tbody id="tabelaRodadas"></tbody>
  </table>

  <!-- Modal -->
  <div class="modal" id="modal">
    <div class="modal-content">
      <h2>Adicionando o Web Scraping</h2>
      <p>Aguarde o tempo de 30 dias...</p>
      <div class="progress-container">
        <div class="progress-bar" id="progressBar"></div>
      </div>
      <div class="time-remaining" id="timeRemaining"></div>
    </div>
  </div>

  <script>
    // ===== Dados Painel Aviator (simulação para testes) =====
    let rodada = 0;
    let totalApostado = 0;
    let totalPago = 0;

    function formatar(valor){
      return valor.toLocaleString('pt-BR',{style:'currency',currency:'BRL'});
    }

    function novaRodada(){
      rodada++;
      let aposta = Math.floor(Math.random()*1000)+100;
      let pago = Math.floor(Math.random()*1000);
      totalApostado += aposta;
      totalPago += pago;
      let lucro = aposta - pago;

      document.getElementById('totalApostado').innerText = formatar(totalApostado);
      document.getElementById('totalPago').innerText = formatar(totalPago);
      document.getElementById('lucroCasa').innerText = formatar(totalApostado - totalPago);

      let linha = `<tr>
        <td>${rodada}</td>
        <td>${formatar(aposta)}</td>
        <td>${formatar(pago)}</td>
        <td style="color:${lucro>=0?'#4caf50':'#f44336'}">${formatar(lucro)}</td>
      </tr>`;
      document.getElementById('tabelaRodadas').innerHTML += linha;
    }

    // ===== Modal com Barra de Progresso (30 dias reais) =====
    const modal = document.getElementById('modal');
    const progressBar = document.getElementById('progressBar');
    const timeRemaining = document.getElementById('timeRemaining');

    const TOTAL_MS = 30 * 24 * 60 * 60 * 1000; // 30 dias em ms

    let startTime = localStorage.getItem('aviatorStart');
    if(!startTime){
      startTime = Date.now();
      localStorage.setItem('aviatorStart', startTime);
    }

    function atualizarProgresso(){
      let agora = Date.now();
      let passado = agora - startTime;
      let progresso = Math.min((passado / TOTAL_MS) * 100, 100);
      progressBar.style.width = progresso + '%';

      let restante = TOTAL_MS - passado;
      if(restante < 0) restante = 0;

      let dias = Math.floor(restante / (1000*60*60*24));
      let horas = Math.floor((restante % (1000*60*60*24)) / (1000*60*60));
      let minutos = Math.floor((restante % (1000*60*60)) / (1000*60));
      let segundos = Math.floor((restante % (1000*60)) / 1000);

      timeRemaining.innerText = `Restante: ${dias}d ${horas}h ${minutos}m ${segundos}s`;

      // Exibir no console o tempo salvo e atualizado
      console.log(`Início: ${new Date(parseInt(startTime))}`);
      console.log(`Restante: ${dias}d ${horas}h ${minutos}m ${segundos}s`);

      if(progresso >= 100){
        modal.style.display = 'none';
        console.log("⏱️ 30 dias concluídos!");
      }
    }

    setInterval(atualizarProgresso, 1000);
    atualizarProgresso();
  </script>
</body>
</html>
